import{r as a,C as m,u as S,j as t,H as k,g as O,h as T}from"./index-B1FgG9Im.js";function E(){var x,u;let{getCart:h}=a.useContext(m),{clearCart:g,setCartItemsNo:l,removeProduct:p,updateProductCount:f,setCartId:C,cartId:j}=a.useContext(m);a.useEffect(()=>{I()},[]);let[s,n]=a.useState(null),[d,y]=a.useState(!0),[c,i]=a.useState(""),N=S();async function I(){let e=await h();console.log(e),e.data?(C(e.data._id),n(e),l(e.numOfCartItems)):i("No Cart Item Found , Please Start To Shopping"),y(!1)}async function w(e){let r=await p(e);console.log(r),n(r),l(r.numOfCartItems)}async function P(e,r){let o=await f(e,r);console.log(o),n(o),l(o.numOfCartItems)}async function b(){let e=await g();console.log(e),e.message=="success"&&i("No Item To Show")}function v(){N(`/checkout/${j}`)}return t.jsxs(t.Fragment,{children:[t.jsxs(k,{children:[t.jsx("meta",{charSet:"utf-8"}),t.jsx("title",{children:"Cart"})]}),d?t.jsx("div",{className:"flex justify-center items-center",children:t.jsx(O,{color:"#a4d958"})}):t.jsxs(t.Fragment,{children:[c||t.jsx(t.Fragment,{children:(x=s.data)!=null&&x.products.length?t.jsx(t.Fragment,{children:t.jsxs("div",{className:"w-[70%] mx-auto my-10 relative overflow-x-auto shadow-md sm:rounded-lg",children:[t.jsx("h1",{className:" text-4xl text-green-500 font-bold text-center mt-5",children:"Shipping Cart"}),t.jsxs("div",{className:"flex justify-between px-7 my-6",children:[t.jsxs("h2",{className:" text-gray-600 text-2xl",children:["Total Cart Items: ",s.numOfCartItems]}),t.jsxs("h2",{className:" text-green-600 text-2xl",children:["Total Price:",s.data.totalCartPrice]})]}),t.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[t.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-16 py-3",children:t.jsx("span",{className:"sr-only",children:"Image"})}),t.jsx("th",{scope:"col",className:"px-6 py-3",children:"Product"}),t.jsx("th",{scope:"col",className:"px-6 py-3",children:"Qty"}),t.jsx("th",{scope:"col",className:"px-6 py-3",children:"Price"}),t.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),t.jsx("tbody",{children:s.data.products.filter(e=>e.count!=0).map(e=>t.jsx(T,{ele:e,updateProduct:P,removeItem:w}))})]})]})}):"No Product In The Cart , Please Start Shopping"}),c||d?null:(u=s.data)!=null&&u.products.length?t.jsxs("div",{className:"flex justify-around my-5  w-[70%] mx-auto",children:[t.jsx("button",{className:"bg-red-500 p-3 rounded-lg text-white",onClick:b,children:"Clear Cart"}),t.jsx("button",{className:"bg-green-500 p-3 rounded-lg text-white",onClick:v,children:"Continue to CheckOut"})]}):null]})]})}export{E as default};
